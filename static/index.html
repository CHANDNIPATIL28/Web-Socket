<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <title>WebSocket Client Interface</title>
   <style>
       .letter-button {
           padding: 5px 15px;
           margin: 2px;
           border: 1px solid #000;
           background-color: #fff;
           cursor: pointer;
       }

       .subscribed {
           background-color: #0f0;
       }
   </style>
</head>
<body>
   <h2>WebSocket Client Interface</h2>
   <div id="letters">
       <!-- Buttons will be added here by JavaScript -->
   </div>
   <script>
       const ws = new WebSocket('ws://localhost:8000/ws');
       const lettersDiv = document.getElementById('letters');
       const messagesDiv = document.createElement('div'); // Create a div for messages
       document.body.appendChild(messagesDiv); // Add it to the body of the document

       ws.onmessage = function(event) {
           const message = JSON.parse(event.data);
           const letter = Object.keys(message)[0]; // Assume the message is in the format { "A": 1234 }
           const number = message[letter];
           const messageElement = document.createElement('p');
           messageElement.textContent = `Letter ${letter} updated with number ${number}.`;
           messagesDiv.appendChild(messageElement); // Append the message to the messages div
       };

       // Generate letter buttons
       const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
       letters.split('').forEach(letter => {
           const button = document.createElement('button');
           button.textContent = letter;
           button.classList.add('letter-button');
           button.id = `letter-${letter}`; // Assign a unique ID to each button
           button.onclick = () => toggleSubscription(letter, button);
           lettersDiv.appendChild(button);
       });

       function toggleSubscription(letter, button) {
           if (button.classList.contains('subscribed')) {
               ws.send(JSON.stringify({ action: 'unsubscribe', letter: letter }));
               button.classList.remove('subscribed');
           } else {
               ws.send(JSON.stringify({ action: 'subscribe', letter: letter }));
               button.classList.add('subscribed');
           }
       }
   </script>
</body>
</html>
